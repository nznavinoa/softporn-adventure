<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Softporn Adventure - All Tests</title>
    <style>
        :root {
            --neon-pink: #ff71ce;
            --neon-blue: #01cdfe;
            --neon-green: #05ffa1;
            --neon-purple: #b967ff;
            --neon-yellow: #fffb96;
            --dark-bg: #120458;
            --darker-bg: #000123;
        }
        
        body {
            background-color: var(--darker-bg);
            color: white;
            font-family: 'Arial', sans-serif;
            padding: 20px;
        }
        
        h1, h2, h3 {
            color: var(--neon-pink);
            text-shadow: 0 0 5px var(--neon-pink);
        }
        
        button {
            background-color: transparent;
            border: 1px solid var(--neon-blue);
            color: white;
            padding: 5px 10px;
            margin: 5px;
            cursor: pointer;
            border-radius: 4px;
        }
        
        button:hover {
            background-color: rgba(1, 205, 254, 0.2);
            box-shadow: 0 0 5px var(--neon-blue);
        }
        
        .test-section {
            margin-bottom: 30px;
            border: 1px solid var(--neon-purple);
            padding: 15px;
            border-radius: 8px;
            background-color: rgba(18, 4, 88, 0.5);
        }
        
        .test-results {
            margin-top: 15px;
            border: 1px solid var(--neon-green);
            padding: 10px;
            min-height: 100px;
            border-radius: 4px;
            background-color: rgba(5, 255, 161, 0.1);
            white-space: pre-wrap;
            overflow-wrap: break-word;
        }
        
        .test-pass {
            color: var(--neon-green);
        }
        
        .test-fail {
            color: var(--neon-pink);
        }
        
        .run-all {
            background-color: rgba(185, 103, 255, 0.2);
            border-color: var(--neon-purple);
            padding: 10px 20px;
            font-size: 1.1rem;
            margin-bottom: 20px;
            box-shadow: 0 0 8px var(--neon-purple);
        }
        
        #error-log {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid var(--neon-pink);
            background-color: rgba(255, 113, 206, 0.1);
            border-radius: 4px;
            display: none;
        }
        
        #error-log.show {
            display: block;
        }
    </style>
</head>
<body>
    <h1>Softporn Adventure - Test Suite</h1>
    
    <button id="run-all-tests" class="run-all">Run All Tests</button>
    
    <!-- Phase 1 Tests -->
    <div class="test-section">
        <h2>Phase 1: Preparation and Analysis</h2>
        <button id="run-phase1-tests">Run Phase 1 Tests</button>
        <div id="phase1-results" class="test-results"></div>
    </div>
    
    <!-- Phase 2 Tests -->
    <div class="test-section">
        <h2>Phase 2: Core Infrastructure</h2>
        <button id="run-phase2-tests">Run Phase 2 Tests</button>
        <div id="phase2-results" class="test-results"></div>
    </div>
    
    <!-- Phase 3 Tests -->
    <div class="test-section">
        <h2>Phase 3: Feature Implementation</h2>
        <button id="run-phase3-tests">Run Phase 3 Tests</button>
        <div id="phase3-results" class="test-results"></div>
    </div>
    
    <!-- Phase 4 Tests -->
    <div class="test-section">
        <h2>Phase 4: UI Enhancement</h2>
        <button id="run-phase4-tests">Run Phase 4 Tests</button>
        <div id="phase4-results" class="test-results"></div>
    </div>
    
    <!-- Error log for debugging -->
    <div id="error-log"></div>
    
    <script>
        // Helper function to log errors
        function logError(message, error) {
            console.error(message, error);
            
            const errorLog = document.getElementById('error-log');
            errorLog.classList.add('show');
            
            const errorMessage = document.createElement('div');
            errorMessage.innerHTML = `<strong>${message}:</strong> ${error.message}<br>`;
            if (error.stack) {
                errorMessage.innerHTML += `<pre>${error.stack}</pre>`;
            }
            
            errorLog.appendChild(errorMessage);
        }
        
        // Helper function to display test results
        function displayResults(results, elementId) {
            const resultsElement = document.getElementById(elementId);
            resultsElement.innerHTML = '';
            
            if (!results || !Array.isArray(results)) {
                resultsElement.innerHTML = '<div class="test-fail">No test results returned</div>';
                return;
            }
            
            let totalTests = 0;
            let passedTests = 0;
            
            results.forEach(test => {
                totalTests++;
                const testElement = document.createElement('div');
                
                if (test.passed) {
                    testElement.className = 'test-pass';
                    testElement.textContent = `✓ PASS: ${test.name}`;
                    passedTests++;
                } else {
                    testElement.className = 'test-fail';
                    testElement.textContent = `✗ FAIL: ${test.name} - ${test.error || 'Test failed'}`;
                }
                
                resultsElement.appendChild(testElement);
            });
            
            const summaryElement = document.createElement('div');
            summaryElement.style.marginTop = '10px';
            summaryElement.style.fontWeight = 'bold';
            summaryElement.textContent = `${passedTests}/${totalTests} tests passed`;
            
            resultsElement.appendChild(summaryElement);
        }
        
        // Placeholder implementations for test functions
        function runPhase1Tests() {
            // Placeholder implementation
            return Promise.resolve([
                { name: 'Phase 1 Test 1 (Placeholder)', passed: true },
                { name: 'Phase 1 Test 2 (Placeholder)', passed: true }
            ]);
        }
        
        function runPhase2Tests() {
            // Placeholder implementation
            return Promise.resolve([
                { name: 'Phase 2 Test 1 (Placeholder)', passed: true },
                { name: 'Phase 2 Test 2 (Placeholder)', passed: true }
            ]);
        }
        
        function runPhase3Tests() {
            // Placeholder implementation
            return Promise.resolve([
                { name: 'Phase 3 Test 1 (Placeholder)', passed: true },
                { name: 'Phase 3 Test 2 (Placeholder)', passed: true }
            ]);
        }
        
        function runPhase4Tests() {
            console.log('Running Phase 4 Tests: UI Enhancement');
            
            // These are dummy tests to verify the test runner is working
            // Replace with actual tests when implementing the real tests
            const results = [
                {
                    name: 'ImageLoader Initialization',
                    passed: true,
                    error: null
                },
                {
                    name: 'RoomDisplay Component',
                    passed: true,
                    error: null
                },
                {
                    name: 'CommandInput Enhancement',
                    passed: true,
                    error: null
                },
                {
                    name: 'UI Transitions',
                    passed: true,
                    error: null
                },
                {
                    name: 'Responsive Design',
                    passed: true,
                    error: null
                }
            ];
            
            return Promise.resolve(results);
        }
        
        // Run a specific phase's tests
        async function runPhaseTests(phase, resultElementId) {
            try {
                const resultsElement = document.getElementById(resultElementId);
                resultsElement.innerHTML = '<div>Running tests...</div>';
                
                let testFunction;
                switch(phase) {
                    case 1: testFunction = runPhase1Tests; break;
                    case 2: testFunction = runPhase2Tests; break;
                    case 3: testFunction = runPhase3Tests; break;
                    case 4: testFunction = runPhase4Tests; break;
                }
                
                if (!testFunction) {
                    resultsElement.innerHTML = `<div class="test-fail">No test function found for Phase ${phase}</div>`;
                    return;
                }
                
                const results = await testFunction();
                displayResults(results, resultElementId);
            } catch (error) {
                logError(`Error running Phase ${phase} tests`, error);
                document.getElementById(resultElementId).innerHTML = 
                    `<div class="test-fail">Error running tests: ${error.message}</div>`;
            }
        }
        
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Phase 1 Tests
            document.getElementById('run-phase1-tests').addEventListener('click', () => {
                runPhaseTests(1, 'phase1-results');
            });
            
            // Phase 2 Tests
            document.getElementById('run-phase2-tests').addEventListener('click', () => {
                runPhaseTests(2, 'phase2-results');
            });
            
            // Phase 3 Tests
            document.getElementById('run-phase3-tests').addEventListener('click', () => {
                runPhaseTests(3, 'phase3-results');
            });
            
            // Phase 4 Tests
            document.getElementById('run-phase4-tests').addEventListener('click', () => {
                runPhaseTests(4, 'phase4-results');
            });
            
            // Run All Tests
            document.getElementById('run-all-tests').addEventListener('click', async () => {
                try {
                    for (let phase = 1; phase <= 4; phase++) {
                        await runPhaseTests(phase, `phase${phase}-results`);
                    }
                } catch (error) {
                    logError('Error running all tests', error);
                    alert(`Error running all tests: ${error.message}`);
                }
            });
        });
    </script>
    
    <!-- Include the Phase 4 tests -->
    <script>
        // You can paste the actual implementation of phase4Tests.js here when ready
        // For now, we're using the placeholder implementation defined above
    </script>
</body>
</html>